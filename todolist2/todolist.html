<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>todolist</title>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
	<script src="js/bootstrap.js"></script>
	<script src="js/vue.js"></script>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script>
		window.onload = function(){
			new Vue({
				el:'#box',
				data:{
					mydata:[],
					username:'',
					userage:'',
					nowIndex:-100,
					msg:''
				},
				methods:{
					add:function(){
						this.mydata.push({
							name:this.username,
							age:this.userage
						});
					},
					judge:function(idx){
						if (idx==-2) {
							this.msg ='确认删除全部吗？';	
						}else{
							this.msg = '确认删除吗？';	
						}
					},
					delmsg:function(idx){
						if (idx == -2) {
							this.mydata=[];
						}else{
							this.mydata.splice(idx,1);					
						}
					}
				}
			})
		}
	</script>
</head>
<body>
    <div class="container" id="box">
    	<form role="form">
    		<div class="form-group">
    			<label for="username">用户名：</label>
    			<input type="text" id="username" class="form-control" placeholder="输入用户名" v-model="username">
    		</div>
     		<div class="form-group">
    			<label for="age">年龄：</label>
    			<input type="text" id="username" class="form-control" placeholder="输入年龄" v-model="userage">
    		</div>
    		<div class="form-group">
    			<input type="button" value="添加" class="btn btn-primary" @click="add">
    			<input type="reset" value="重置" class="btn btn-danger">
    		</div>
    		<hr>
    		<table class="table table-hover"> 
    			<caption class="h3 text-info text-center">用户信息表</caption>
    			<tr class="text-danger" >
    				<th class="text-center">序号</th>
    				<th class="text-center">名字</th>
    				<th class="text-center">年龄</th>
    				<th class="text-center">操作</th>
    			</tr>
    			<tr class="text-center" v-for="(value,index) in mydata">
    				<td>{{index+1}}</td>
    				<td>{{value.name}}</td>
    				<td>{{value.age}}</td>
    				<td>
    					<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#layer" v-on:click="nowIndex=index,judge(nowIndex)" >删除</button>
    				</td>
    			</tr> 			
    			<tr v-show="mydata.length != 0">
    				<td colspan="4" class="text-right">
    					<button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#layer" @click="nowIndex=-2,judge(nowIndex)">全部删除</button>
    				</td>
    			</tr> 
    			<tr v-show="mydata.length == 0">
    				<td colspan="4" class="text-center text-muted">
    					<p>暂无数据...</p>
    				</td>
    			</tr>  		   			 			
    		</table>
    	</form>
    	<div role="dialog" class="modal fade bs-example-modal-sm" id="layer" :data-index="nowIndex">
    		<div class="modal-dialog" role="document">
    			<div class="modal-content">
    				<div class="modal-header">
    					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
    						<span aria-hidden="true">&times;</span>
    					</button>
    					<h4 class="modal-title">
    						{{msg}}
    					</h4>
    				</div>
    				<div class="modal-body">
				        <p>删除后会造成xx数据丢失，请确定数据已保存&hellip;</p>
				    </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-primary" data-dismiss="modal">取消</button>     
			        <button type="button" class="btn btn-danger" data-dismiss="modal" @click="delmsg(nowIndex)">确定</button>
			      </div>
    			</div>
    		</div>
    	</div>
    </div>
</body>
</html>